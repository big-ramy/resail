/* ========================================================== */
/* ==   ملف التجاوب والطباعة (responsive.css) - نسخة محسّنة   == */
/* ==   يحتوي على جميع قواعد @media للشاشات المختلفة والطباعة == */
/* ========================================================== */

/* --- شاشات اللابتوب الصغيرة والأجهزة اللوحية --- */
@media (max-width: 992px) {
    #preview-wrapper {
        flex-direction: column !important; 
    }
    #controls-sidebar {
        width: 100%;
        order: -1;
        margin-bottom: 20px;
    }
}

/* --- شاشات الجوال العامة --- */
@media (max-width: 768px) {
    .site-header {
        height: auto;
        padding: 60px 0;
    }
    .site-header h1 {
        font-size: 1.8em;
    }
    .site-header p.lead {
        font-size: 1.1em;
    }
    .header-content {
        gap: 15px;
    }

    /* ⭐ تحسينات الأزرار العامة */
    .btn, .btn-lg, .btn-sm {
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
        height: auto;
    }
    .form-group .btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.8rem;
    }

    /* ⭐ تحسينات بطاقات الخصم */
    .discount-card {
        min-width: 180px; /* تصغير العرض الأدنى للبطاقة */
        padding: 8px 12px;
    }
    .discount-tag {
        font-size: 1em;
        padding: 8px;
    }
    .discount-info .code-text {
        font-size: 0.9em;
    }
    .discount-info small {
        font-size: 0.75em;
    }

    /* --- تجاوب السيرة الذاتية داخل المعاينة --- */
    #cv-container {
        min-height: auto;
        transform: scale(1); /* إزالة أي تصغير للعرض الكامل */
        width: 100%;
        max-width: 100%;
    }

    .cv-two-column-layout, .ast-layout, .cv-professional-layout {
        flex-direction: column !important;
        gap: 0 !important;
    }
    .cv-professional-layout {
        display: flex !important;
    }
    .cv-sidebar, .cv-main-content,
    .cv-two-column-layout .cv-sidebar, .ast-layout .cv-sidebar,
    .cv-professional-layout .cv-sidebar,
    .cv-two-column-layout .cv-main-content, .ast-layout .cv-main-content,
    .cv-professional-layout .cv-main-content {
        width: 100% !important;
        max-width: 100% !important;
        padding: 15px !important;
        min-height: auto !important;
    }
    .cv-professional-layout .cv-header.professional-layout {
        width: 100% !important;
    }

    /* أحجام الخطوط داخل السيرة الذاتية */
    #cv-container {
        font-size: 14px !important;
    }
    .cv-name { font-size: 1.8em !important; }
    .cv-title { font-size: 1.1em !important; }
    .cv-section-title { font-size: 1.2em !important; margin-bottom: 10px !important; padding-bottom: 5px !important; }
    .cv-contact-item { font-size: 0.9em !important; flex-wrap: wrap; justify-content: flex-start; text-align: start; }
    body.rtl .cv-contact-item { justify-content: flex-end; }
    .cv-contact-item i { width: 16px !important; height: 16px !important; font-size: 0.9em !important; margin: 0 5px !important; }
    .cv-profile-pic { width: 100px !important; height: 100px !important; margin: 0 auto 15px auto !important; }
    .cv-skill-list, .cv-language-list { column-count: 1 !important; text-align: start; }
    body.rtl .cv-skill-list, body.rtl .cv-language-list { text-align: right; }
    .cv-skill-item { margin: 5px 0 !important; display: inline-block !important; width: auto; font-size: 0.85em !important;}
}

/* --- شاشات الجوال الصغيرة جداً --- */
@media (max-width: 420px) {
    #cv-container { padding: 3mm; }
    .cv-name { font-size: 1.6em !important; }
    .cv-title { font-size: 1em !important; }
    .cv-section-title { font-size: 1.1em !important; }
    .cv-profile-pic { width: 80px !important; height: 80px !important; }
    .cv-contact-item { font-size: 0.8em !important; }
    .cv-job-title, .cv-degree { font-size: 0.95em !important; }
    .cv-company, .cv-institution, .cv-duration { font-size: 0.85em !important; }
    .cv-experience-item p { font-size: 0.85em !important; line-height: 1.4 !important; }
    .cv-skill-item { font-size: 0.8em !important; padding: 4px 8px !important; }

    /* ⭐ تصغير بطاقات الخصم أكثر */
    .discount-card {
        min-width: 160px;
        padding: 6px 10px;
        flex-direction: column; /* جعل المحتوى عمودياً */
        gap: 5px;
    }
    .discount-tag {
        margin: 0;
    }
}


/* ==========================================================================
   ==                  قواعد الطباعة النهائية والمبسطة V5                   ==
   ========================================================================== */
@media print {
    /* --- 1. إعدادات الصفحة العامة --- */
    @page {
        size: A4;
        margin: 0;
    }
   .professional-layout {
        grid-template-rows: auto auto !important; 
        height: auto !important;
    }
    .professional-layout .cv-header.professional-layout {
       page-break-after: avoid !important;
    }
    .professional-layout.template3 .cv-header.professional-layout .cv-profile-pic {
        display: block !important;
    }

    /* --- 2. إصلاح هبوط الهيدر في القالب الإبداعي 2 --- */
    .creative-layout.template2 .cv-content {
        position: static !important;
        padding-top: 0 !important;
    }
    .creative-layout.template2 .header-wave {
        position: static !important;
        height: auto !important;
        margin-bottom: 20px !important;
    }
    .creative-layout.template2 .right-column .cv-profile-pic {
        margin-top: 20px !important;
    }

    html, body {
        margin: 0 !important;
        padding: 0 !important;
        font-size: 10pt;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    /* --- 3. فرض خط موحد وإزالة الظلال --- */
    *:not(.fas):not(.fab):not(.far):not(.fa-solid):not(.fa-regular):not(.fa-brands) {
        font-family: 'Tajawal', Arial, sans-serif !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    /* --- 4. إخفاء عناصر واجهة المستخدم --- */
    body > nav, body > footer, body > header.site-header, #promo-bar,
    .page-section:not(.active-page), #cv-preview-page .d-flex, #controls-sidebar {
        display: none !important;
    }
    
    /* --- 5. التحكم في كسر الصفحات --- */
    .cv-section, .cv-header, .cv-experience-item {
        page-break-inside: avoid !important;
    }
    .cv-end-marker {
        margin-top: auto !important;
        height: 1px !important;
        display: block !important;
        page-break-inside: avoid !important;
    }
}
